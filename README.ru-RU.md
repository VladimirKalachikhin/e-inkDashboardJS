# e-ink Dashboard for Signal K [![License: CC BY-SA 4.0](https://img.shields.io/badge/License-CC%20BY--SA%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by-sa/4.0/)

e-inkDashboardJS -- это расширение для Signal K, веб-приложение, которое в реальном времени показывает некоторые параметры от сервера Signal K на телефонах/планшетах или современных мощных устройствах с экранами на электронных чернилах. Поддержка JavaScript на устройстве обязательна.  
На устройство не нужно устанавливать никаких приложений, нужен только современный браузер.

## v. 0.1

## Возможности
Показ:

* Скорости
* Глубины
* Истинного или магнитного курса (путевого угла, если быть точным)
* Сигнализация о выходе некоторых параметров за установленные пределы
* Русский и английский интерфейс

## Требования
Операционная система семейства Linux, Signal K

## Использование
В отличии от [e-inkdashboard](https://www.npmjs.com/package/e-inkdashboard) e-inkDashboardJS может показывать данные сразу по их появлении от датчиков, что позволяет не упустить быстрого изменения значений, скажем, глубины. Если же клиентское устройство не справляется с такой скоростью поступления данных -- есть возможность задать меньшую скорость.  
Веб-приложение оптимизировано для экранов весьма различного разрешения -- от самых маленьких до больших. Никакой настройки не требуется.  
Предполагается, что клиентское устройство оснащено чувствительным к нажатию экраном, и управление приложением происходит нажатиями на экран.  
Выбор основного отображаемого параметра осуществляется средней кнопкой в нижней части экрана, кроме того, генеральное направление движения всегда отображается серой маркой у края экрана.  
При наличии на некоторых клиентском устройстве аппаратных клавиш можно настроить некоторые из них для переключения режимов, вызова меню оповещений и переключения между истинным и магнитным курсом. Настройка аппаратных клавиш находится внизу окна оповещений. Нажмите <img src="public/img/settings.png" alt="Settings button" width="24px">.   
По-умолчанию используются:

* Стрелка вниз для следующего режима
* Стрелка вверх для предыдущего режима
* Правая клавиша Alt для вызова меню оповещений
* Клавиша M (латинская M) для переключения между истинным и магнитным курсом
 
Может быть запущено несколько экземпляров веб-приложения, отображающих разную информацию -- в разных окнах или на разных устройствах.  
Доступ к веб-приложению осуществляется по адресу

`http://YourSignalKhost:YourSignalKport/e-inkdashboardjs/`  

где YourSignalKhost -- адрес компьютера, на котором работает Signa K;  
YourSignalKport -- порт на этом компьютере, на котором отвечает Signal K

Веб-приложение позволяет назначить визуальную и звуковую сигнализацию на выход некоторых параметров за установленные значения. Для подачи звукового сигнала может потребоваться дополнительная настройка браузера.  
Сигнализация устанавливается отдельно на каждом показывающем e-inkDashboard устройстве, и сработает только в том случае, если устройство активно и показывает e-inkDashboardjs. Будьте внимательны!

## Установка и конфигурирование

Установите расширение из  Signal K Appstore как **e-inkdashboardjs** обычным образом.  
Перезапустите Signal K  
В меню Server -> Plugin Config сервера Signal K укажите запуск расширения при старте сервера и желаемую частоту обновления показываемых параметров.  
Не забывайте нажать Submit для сохранения изменений.  
Частоту обновления показываемых параметров следует установить настолько быстрой, насколько позволяет используемое устройство, с тем, чтобы важные изменения параметров (например, глубины) не были пропущены. Значение 0 указывает на показ значений по мере их изменения.

## Средства оповещения SignalK
К сожалению, SignalK не имеет никаких собственных средств реагирования на выход указанных параметров за установленные значения, что вынуждает реализовывать собственные. Однако, e-inkDashboardJS выставляет ограничения для скорости, глубины и курса в принятой в SignalK форме, а также размещает уведомления о выходе за эти ограничения принятым в SignalK порядком.  
Вне зависимости от этого приложение воспринимает от SignalK сообщение "Человек за бортом!" Если в этом сообщении есть информация о местоположении терпящего бедствие ([GaladrielMap SignalK edition](https://github.com/VladimirKalachikhin/GaladrielMapSK/blob/master/README.ru-RU.md) передаёт эту информацию), то отображается направление на это местоположение.

## Благодарности

* [Typicons by Stephen Hutchings](https://icon-icons.com/pack/Typicons/1144) за графические элементы интерфейса.

## Поддержка

[Форум](https://github.com/VladimirKalachikhin/Galadriel-map/discussions)

Форум будет живее, если вы сделаете пожертвование [через PayPal](https://paypal.me/VladimirKalachikhin) по адресу [galadrielmap@gmail.com](mailto:galadrielmap@gmail.com) или на [ЮМани](https://yasobe.ru/na/galadrielmap).

Вы можете получить [индивидуальную платную консультацию](https://kwork.ru/training-consulting/20093293/konsultatsii-po-ustanovke-i-ispolzovaniyu-galadrielmap) по вопросам установки и использования e-inkDashboardJS.

